# ArtEcho 开发环境配置指南

> **环境检查完成时间**：2025-12-09 23:50:34

---

## 📊 当前环境状态

### ✅ 已安装工具
- **Node.js**：v22.14.0 ✅
- **npm**：v10.9.2 ✅
- **Python**：3.13.2 ✅
- **Git**：2.47.1.windows.2 ✅
- **VS Code**：已安装 ✅

### ❌ 待安装工具
- **PostgreSQL**：未安装 ❌
- **Redis**：未安装 ❌
- **MongoDB**：未安装 ❌
- **Docker**：未安装 ❌
- **Flutter**：未安装 ❌
- **Unity**：待手动验证 ❌

---

## 🚀 快速安装指南

### 1. 数据库环境

#### PostgreSQL 安装
```bash
# 方法1：使用 Chocolatey 安装
choco install postgresql

# 方法2：从官网下载安装
# https://www.postgresql.org/download/windows/
```

#### Redis 安装
```bash
# 方法1：使用 Chocolatey 安装
choco install redis-64

# 方法2：手动下载
# https://github.com/microsoftarchive/redis/releases
```

#### MongoDB 安装
```bash
# 方法1：使用 Chocolatey 安装
choco install mongodb

# 方法2：从官网下载安装
# https://www.mongodb.com/try/download/community
```

### 2. 容器化环境

#### Docker Desktop 安装
```bash
# 下载并安装 Docker Desktop for Windows
# https://www.docker.com/products/docker-desktop
```

### 3. 移动端开发环境

#### React Native 环境
```bash
# 安装 React Native CLI
npm install -g @react-native-community/cli

# 安装 Android Studio（用于 Android 开发）
# https://developer.android.com/studio

# 安装 Xcode（仅 macOS，用于 iOS 开发）
```

#### Flutter 安装
```bash
# 1. 下载 Flutter SDK
# https://flutter.dev/docs/get-started/install/windows

# 2. 解压到指定目录（如 C:\flutter）
# 3. 添加到环境变量 PATH

# 4. 运行 doctor 检查
flutter doctor
```

### 4. 3D开发环境

#### Unity Hub + Unity Editor
```bash
# 1. 下载 Unity Hub
# https://unity3d.com/get-unity/download

# 2. 安装 Unity Editor（推荐 LTS 版本）
# 3. 安装构建模块：
#    - Android Build Support
#    - iOS Build Support（需要 macOS）
#    - Windows Build Support
```

---

## 📋 环境配置步骤

### 步骤1：安装 Chocolatey（Windows 包管理器）
```powershell
# 以管理员身份运行 PowerShell
Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))
```

### 步骤2：一键安装基础环境
```bash
# 安装所有数据库
choco install postgresql redis-64 mongodb

# 安装 Docker Desktop
choco install docker-desktop

# 重启计算机
```

### 步骤3：配置移动端开发环境
```bash
# React Native 环境
npm install -g @react-native-community/cli

# Flutter 环境（需要手动下载后配置）
flutter doctor
```

### 步骤4：验证安装
```bash
# 运行环境检查脚本
# （见本文档末尾）
```

---

## 🔧 项目特定配置

### Python 环境配置
```bash
# 创建虚拟环境
python -m venv artcho-venv

# 激活虚拟环境
artcho-venv\Scripts\activate

# 安装依赖包
pip install fastapi uvicorn sqlalchemy psycopg2-binary redis pymongo python-multipart python-jose[cryptography] passlib[bcrypt] python-dotenv
```

### Node.js 环境配置
```bash
# 安装全局包
npm install -g @react-native-community/cli typescript ts-node nodemon

# 项目依赖安装（在项目根目录）
npm install
```

---

## 📁 项目目录结构创建

```bash
# 创建项目目录结构
mkdir mobile web server ai-models 3d-models docs
mkdir mobile\android mobile\ios
mkdir web\src web\public
mkdir server\src server\tests
mkdir docs\api docs\deployment
```

---

## 🗄️ 数据库初始化

### PostgreSQL 初始化
```sql
-- 创建数据库
CREATE DATABASE artecho;

-- 创建用户
CREATE USER artecho_user WITH PASSWORD 'your_password';

-- 授权
GRANT ALL PRIVILEGES ON DATABASE artecho TO artecho_user;
```

### MongoDB 初始化
```bash
# 启动 MongoDB 服务
net start MongoDB

# 创建数据库和集合
mongo
> use artecho
> db.createCollection("artworks")
> db.createCollection("users")
```

---

## 🐳 Docker 配置（可选）

### docker-compose.yml
```yaml
version: '3.8'
services:
  postgres:
    image: postgres:13
    environment:
      POSTGRES_DB: artecho
      POSTGRES_USER: artecho_user
      POSTGRES_PASSWORD: your_password
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:6-alpine
    ports:
      - "6379:6379"

  mongodb:
    image: mongo:5
    ports:
      - "27017:27017"
    volumes:
      - mongodb_data:/data/db

volumes:
  postgres_data:
  mongodb_data:
```

---

## 🔍 环境检查脚本

### check_env.bat（Windows 批处理脚本）
```batch
@echo off
echo === ArtEcho 开发环境检查 ===
echo.

echo [1/8] 检查 Node.js...
node --version >nul 2>&1 && echo ✅ Node.js 已安装 || echo ❌ Node.js 未安装

echo [2/8] 检查 Python...
python --version >nul 2>&1 && echo ✅ Python 已安装 || echo ❌ Python 未安装

echo [3/8] 检查 Git...
git --version >nul 2>&1 && echo ✅ Git 已安装 || echo ❌ Git 未安装

echo [4/8] 检查 PostgreSQL...
psql --version >nul 2>&1 && echo ✅ PostgreSQL 已安装 || echo ❌ PostgreSQL 未安装

echo [5/8] 检查 Redis...
redis-cli --version >nul 2>&1 && echo ✅ Redis 已安装 || echo ❌ Redis 未安装

echo [6/8] 检查 MongoDB...
mongo --version >nul 2>&1 && echo ✅ MongoDB 已安装 || echo ❌ MongoDB 未安装

echo [7/8] 检查 Docker...
docker --version >nul 2>&1 && echo ✅ Docker 已安装 || echo ❌ Docker 未安装

echo [8/8] 检查 Flutter...
flutter --version >nul 2>&1 && echo ✅ Flutter 已安装 || echo ❌ Flutter 未安装

echo.
echo === 检查完成 ===
pause
```

---

## 🚨 常见问题解决

### 问题1：PostgreSQL 服务无法启动
```bash
# 解决方案：重新初始化数据库
pg_ctl -D "C:\Program Files\PostgreSQL\13\data" initdb
```

### 问题2：Flutter Doctor 报错
```bash
# 安装 Android SDK 并配置环境变量
# 设置 ANDROID_HOME 环境变量
```

### 问题3：Redis 连接失败
```bash
# 启动 Redis 服务
redis-server

# 或者使用 Windows 服务
net start redis
```

---

## 📚 相关文档链接

- [Node.js 官方文档](https://nodejs.org/docs/)
- [Python 官方文档](https://docs.python.org/3/)
- [React Native 官方文档](https://reactnative.dev/docs/getting-started)
- [Flutter 官方文档](https://flutter.dev/docs)
- [Unity 官方文档](https://docs.unity3d.com/)
- [PostgreSQL 官方文档](https://www.postgresql.org/docs/)
- [Redis 官方文档](https://redis.io/documentation)
- [MongoDB 官方文档](https://docs.mongodb.com/)

---

## ✅ 环境配置完成清单

- [ ] Node.js 和 npm 安装完成
- [ ] Python 虚拟环境创建完成
- [ ] PostgreSQL 安装并配置完成
- [ ] Redis 安装并启动完成
- [ ] MongoDB 安装并配置完成
- [ ] Docker Desktop 安装完成
- [ ] React Native 环境配置完成
- [ ] Flutter 环境配置完成
- [ ] Unity Hub 和 Unity Editor 安装完成
- [ ] 项目目录结构创建完成
- [ ] 数据库初始化完成
- [ ] 环境检查脚本运行通过

---

> **提示**：建议按照顺序逐个安装和配置环境，每完成一个步骤都运行相应的检查命令，确保环境正常工作。
